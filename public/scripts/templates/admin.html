<div class="adminTabs wide100p">
    <nav class="adminNav flex-container alignItemsCenter justifyCenter">
        <button type="button" class="manageUsersButton menu_button menu_button_icon" data-target-tab="usersList">
            <h4 data-i18n="Manager Users">管理用户</h4>
        </button>
        <button type="button" class="newUserButton menu_button menu_button_icon" data-target-tab="registerNewUserBlock">
            <h4 data-i18n="New User">新用户</h4>
        </button>
        <button type="button" class="systemLoadButton menu_button menu_button_icon" data-target-tab="systemLoadBlock">
            <h4 data-i18n="System Load">系统负载</h4>
        </button>
        <button type="button" class="invitationCodesButton menu_button menu_button_icon" data-target-tab="invitationCodesBlock">
            <h4 data-i18n="Invitation Codes">邀请码管理</h4>
        </button>
        <button type="button" class="announcementsButton menu_button menu_button_icon" data-target-tab="announcementsBlock">
            <h4 data-i18n="Announcements">公告管理</h4>
        </button>
    </nav>
    <div class="userAccountTemplate template_element">
        <div class="flex-container userAccount alignItemsCenter flexGap10">
            <div class="flex-container flexFlowColumn alignItemsCenter flexNoGap">
                <div class="avatar" title="If a custom avatar is not set, the user's default persona image will be displayed.">
                    <img src="img/ai4.png" alt="avatar">
                </div>
                <div class="flex-container alignItemsCenter">
                    <div class="userAvatarChange right_menu_button" title="Set a custom avatar.">
                        <i class="fa-fw fa-solid fa-image"></i>
                    </div>
                    <div class="userAvatarRemove right_menu_button" title="Remove a custom avatar.">
                        <i class="fa-fw fa-solid fa-trash"></i>
                    </div>
                </div>
                <form>
                    <input type="file" class="avatarUpload" accept="image/*" hidden>
                </form>
            </div>
            <div class="flex1 flex-container flexFlowColumn flexNoGap justifyLeft">
                <div class="flex-container flexGap10 alignItemsCenter">
                    <i class="hasPassword fa-solid fa-lock" title="This account is password protected."></i>
                    <i class="noPassword fa-solid fa-lock-open" title="This account is not password protected."></i>
                    <h3 class="userName margin0"></h3>
                    <small class="userHandle">&nbsp;</small>
                </div>
                <div class="flex-container flexFlowColumn flexNoGap">
                    <span>
                        <span data-i18n="Role:">Role:</span>
                        <span class="userRole"></span>
                    </span>
                    <span>
                        <span data-i18n="Status:">Status:</span>
                        <span class="userStatus">&nbsp;</span>
                    </span>
                    <span>
                        <span data-i18n="Created:">Created:</span>
                        <span class="userCreated">&nbsp;</span>
                    </span>
                </div>
            </div>
            <div class="flex-container flexFlowColumn">
                <div class="flex-container">
                    <div class="userChangeNameButton menu_button" title="Change user display name.">
                        <i class="fa-fw fa-solid fa-pencil"></i>
                    </div>
                    <div class="userEnableButton menu_button" title="Enable user account.">
                        <i class="fa-fw fa-solid fa-check"></i>
                    </div>
                    <div class="userDisableButton menu_button" title="Disable user account.">
                        <i class="fa-fw fa-solid fa-ban"></i>
                    </div>
                    <div class="userPromoteButton menu_button" title="Promote user to admin.">
                        <i class="fa-fw fa-solid fa-arrow-up"></i>
                    </div>
                    <div class="userDemoteButton menu_button" title="Demote user to regular user.">
                        <i class="fa-fw fa-solid fa-arrow-down"></i>
                    </div>
                </div>
                <div class="flex-container">
                    <div class="userBackupButton menu_button menu_button_icon" title="Download a backup of user data.">
                        <i class="fa-fw fa-solid fa-download"></i>
                    </div>
                    <div class="userChangePasswordButton menu_button" title="Change user password.">
                        <i class="fa-fw fa-solid fa-key"></i>
                    </div>
                    <div class="userDelete menu_button warning" title="Delete user account.">
                        <i class="fa-fw fa-solid fa-trash"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="navTab usersList flex-container flexFlowColumn">
    </div>
    <div class="navTab registerNewUserBlock" style="display: none;">
        <form class="flex-container flexFlowColumn flexGap10 userCreateForm" action="javascript:void(0);">
            <div class="flex-container flexNoGap">
                <span data-i18n="Display Name:">Display Name:</span>
                <span class="warning">*</span>
                <input name="_name" class="createUserDisplayName text_pole" type="text" placeholder="e.g. John Snow" autocomplete="username">
            </div>
            <div class="flex-container flexNoGap">
                <span data-i18n="User Handle:">User Handle:</span>
                <span class="warning">*</span>
                <input name="handle" class="createUserHandle text_pole" placeholder="e.g. john-snow (lowercase letters, numbers, and dashes only)" type="text" pattern="[a-z0-9-]+">
            </div>
            <div class="flex-container flexNoGap">
                <span data-i18n="Password:">Password:</span>
                <input name="password" class="createUserPassword text_pole" type="password" placeholder="[ No password ]" autocomplete="new-password">
            </div>
            <div class="flex-container flexNoGap">
                <span data-i18n="Confirm Password:">Confirm Password:</span>
                <input name="confirm" class="createUserConfirmPassword text_pole" type="password" placeholder="[ No password ]" autocomplete="new-password">
            </div>
            <span data-i18n="This will create a new subfolder...">
                This will create a new subfolder in the /data/ directory with the user's handle as the folder name.
            </span>
            <div class="flex-container justifyCenter">
                <button type="submit" class="menu_button menu_button_icon newUserRegisterFinalizeButton">
                    <i class="fa-fw fa-solid fa-user-plus"></i>
                    <span data-i18n="Create">Create</span>
                </button>
            </div>
        </form>
    </div>

    <!-- 系统负载管理选项卡 -->
    <div class="navTab systemLoadBlock" style="display: none;">
        <div class="flex-container flexFlowColumn flexGap10">
            <h3 data-i18n="System Load Monitoring">系统负载监控</h3>

            <!-- 系统概览 -->
            <div class="systemOverview flex-container flexGap20">
                <div class="systemCard flex1">
                    <h4>CPU 使用率</h4>
                    <div class="systemMetric">
                        <span class="metricValue" id="cpuUsage">--</span>
                        <span class="metricUnit">%</span>
                    </div>
                    <div class="progressBar">
                        <div class="progressFill" id="cpuProgress" style="width: 0%"></div>
                    </div>
                </div>

                <div class="systemCard flex1">
                    <h4>内存使用</h4>
                    <div class="systemMetric">
                        <span class="metricValue" id="memoryUsage">--</span>
                        <span class="metricUnit">%</span>
                    </div>
                    <div class="progressBar">
                        <div class="progressFill" id="memoryProgress" style="width: 0%"></div>
                    </div>
                </div>

                <div class="systemCard flex1">
                    <h4>活跃用户</h4>
                    <div class="systemMetric">
                        <span class="metricValue" id="activeUsers">--</span>
                        <span class="metricUnit">人</span>
                    </div>
                </div>

                <div class="systemCard flex1">
                    <h4>运行时间</h4>
                    <div class="systemMetric">
                        <span class="metricValue" id="uptime">--</span>
                    </div>
                </div>
            </div>

            <!-- 用户统计 -->
            <div class="userActivitySection">
                <h4>用户统计</h4>
                <div class="userActivityList" id="userActivityList">
                    <!-- 用户统计数据将在这里动态加载 -->
                </div>
            </div>

            <!-- 操作按钮 -->
            <div class="flex-container justifyCenter flexGap10">
                <button type="button" class="menu_button menu_button_icon" id="refreshSystemLoad">
                    <i class="fa-fw fa-solid fa-refresh"></i>
                    <span data-i18n="Refresh">刷新数据</span>
                </button>
                <button type="button" class="menu_button menu_button_icon warning" id="clearSystemStats">
                    <i class="fa-fw fa-solid fa-trash"></i>
                    <span data-i18n="Clear Stats">清除统计</span>
                </button>
            </div>
        </div>
    </div>

    <!-- 邀请码管理选项卡 -->
    <div class="navTab invitationCodesBlock" style="display: none;">
        <div class="flex-container flexFlowColumn flexGap10">
            <h3 data-i18n="Invitation Code Management">邀请码管理</h3>

            <!-- 使用说明 -->
            <div class="usage-notice" style="background-color: #fff3cd; border: 1px solid #ffeaa7; border-radius: 5px; padding: 10px; margin-bottom: 15px;">
                <h4 style="margin-top: 0; color: #856404;">
                    <i class="fa-fw fa-solid fa-info-circle"></i>
                    使用说明
                </h4>
                <p style="margin: 5px 0; color: #856404;">
                    <strong>邀请码功能开关：</strong>邀请码功能默认是关闭的，需要手动编辑配置文件来启用。
                </p>
                <p style="margin: 5px 0; color: #856404;">
                    请在项目根目录下的 <code>.\config.yaml</code> 文件中添加以下配置：
                </p>
                <pre style="background-color: #f8f9fa; border: 1px solid #dee2e6; border-radius: 3px; padding: 8px; margin: 5px 0; font-family: monospace; font-size: 12px;">enableInvitationCodes: true</pre>
                <p style="margin: 5px 0; color: #856404;">
                    保存配置文件后，重启服务器即可启用邀请码功能。
                </p>
            </div>

            <!-- 创建邀请码 -->
            <div class="createInvitationSection">
                <h4>创建邀请码</h4>

                <!-- 单个创建 -->
                <div class="creation-mode" id="singleCreationMode">
                    <form class="flex-container flexGap10 alignItemsCenter createInvitationForm" action="javascript:void(0);">
                        <div class="flex-container flexNoGap">
                            <span>过期时间（小时）:</span>
                            <input name="expiresInHours" class="text_pole" type="number" placeholder="留空表示永不过期" min="1" max="8760">
                        </div>
                        <button type="submit" class="menu_button menu_button_icon">
                            <i class="fa-fw fa-solid fa-plus"></i>
                            <span data-i18n="Create Code">创建邀请码</span>
                        </button>
                    </form>
                </div>

                <!-- 批量创建 -->
                <div class="creation-mode" id="batchCreationMode" style="display: none;">
                    <form class="flex-container flexGap10 alignItemsCenter createBatchInvitationForm" action="javascript:void(0);">
                        <div class="flex-container flexNoGap">
                            <span>数量:</span>
                            <input name="batchCount" class="text_pole" type="number" placeholder="批量创建数量" min="1" max="100" value="10">
                        </div>
                        <div class="flex-container flexNoGap">
                            <span>过期时间（小时）:</span>
                            <input name="batchExpiresInHours" class="text_pole" type="number" placeholder="留空表示永不过期" min="1" max="8760">
                        </div>
                        <button type="submit" class="menu_button menu_button_icon">
                            <i class="fa-fw fa-solid fa-layer-group"></i>
                            <span data-i18n="Batch Create">批量创建</span>
                        </button>
                    </form>
                </div>

                <!-- 切换按钮 -->
                <div class="creation-toggle flex-container flexGap10">
                    <button type="button" class="menu_button menu_button_icon creation-toggle-btn active" data-mode="single">
                        <i class="fa-fw fa-solid fa-plus"></i>
                        <span>单个创建</span>
                    </button>
                    <button type="button" class="menu_button menu_button_icon creation-toggle-btn" data-mode="batch">
                        <i class="fa-fw fa-solid fa-layer-group"></i>
                        <span>批量创建</span>
                    </button>
                </div>
            </div>

            <!-- 邀请码列表 -->
            <div class="invitationCodesList">
                <h4>现有邀请码</h4>
                <div class="invitationCodesContainer" id="invitationCodesContainer">
                    <!-- 邀请码列表将在这里动态加载 -->
                </div>
            </div>

            <!-- 批量操作 -->
            <div class="batch-operations">
                <h4>批量操作</h4>
                <div class="flex-container justifyCenter flexGap10">
                    <button type="button" class="menu_button menu_button_icon" id="refreshInvitationCodes">
                        <i class="fa-fw fa-solid fa-refresh"></i>
                        <span data-i18n="Refresh">刷新列表</span>
                    </button>
                    <button type="button" class="menu_button menu_button_icon" id="selectAllCodes">
                        <i class="fa-fw fa-solid fa-check-square"></i>
                        <span data-i18n="Select All">全选</span>
                    </button>
                    <button type="button" class="menu_button menu_button_icon" id="downloadSelectedCodes">
                        <i class="fa-fw fa-solid fa-download"></i>
                        <span data-i18n="Download Selected">下载选中</span>
                    </button>
                    <button type="button" class="menu_button menu_button_icon" id="downloadAllCodes">
                        <i class="fa-fw fa-solid fa-file-download"></i>
                        <span data-i18n="Download All">下载全部</span>
                    </button>
                    <button type="button" class="menu_button menu_button_icon warning" id="cleanupExpiredCodes">
                        <i class="fa-fw fa-solid fa-broom"></i>
                        <span data-i18n="Cleanup">清理过期码</span>
                    </button>
                    <button type="button" class="menu_button menu_button_icon warning" id="deleteSelectedCodes">
                        <i class="fa-fw fa-solid fa-trash-alt"></i>
                        <span data-i18n="Delete Selected">删除选中</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 公告管理选项卡 -->
    <div class="navTab announcementsBlock" style="display: none;">
        <div class="flex-container flexFlowColumn flexGap10">
            <h3 data-i18n="Announcement Management">公告管理</h3>

            <!-- 创建新公告 -->
            <div class="createAnnouncementSection">
                <h4>创建新公告</h4>
                <form class="flex-container flexFlowColumn flexGap10 createAnnouncementForm" action="javascript:void(0);">
                    <div class="flex-container flexNoGap">
                        <span>标题:</span>
                        <input name="title" class="text_pole" type="text" placeholder="输入公告标题" required>
                    </div>
                    <div class="flex-container flexNoGap">
                        <span>内容:</span>
                        <textarea name="content" class="text_pole" rows="5" placeholder="输入公告内容" required></textarea>
                    </div>
                    <div class="flex-container alignItemsCenter flexGap10">
                        <label class="flex-container alignItemsCenter flexGap5">
                            <input name="enabled" type="checkbox" checked>
                            <span>立即启用</span>
                        </label>
                        <button type="submit" class="menu_button menu_button_icon">
                            <i class="fa-fw fa-solid fa-plus"></i>
                            <span data-i18n="Create">创建公告</span>
                        </button>
                    </div>
                </form>
            </div>

            <!-- 公告列表 -->
            <div class="announcementsList">
                <h4>现有公告</h4>
                <div class="flex-container justifyCenter flexGap10" style="margin-bottom: 15px;">
                    <button type="button" class="menu_button menu_button_icon" id="refreshAnnouncements">
                        <i class="fa-fw fa-solid fa-refresh"></i>
                        <span data-i18n="Refresh">刷新列表</span>
                    </button>
                </div>
                <div class="announcementsContainer" id="announcementsContainer">
                    <!-- 公告列表将在这里动态加载 -->
                </div>
            </div>
        </div>
    </div>
</div>
